#summary Gravatar bbPress Plugin
#labels Featured,P-Gravatar

=Introduction=

A simple plugin for Gravatar.

_Please also read *[http://code.google.com/p/llbbsc/ this page]*_

=Download=

* This is the temporary downloading method, because I am waiting for approval from bbPress Exten. Once I got it, I will move file onto it. *

==Quick way==

Download [http://llbbsc.googlecode.com/svn/trunk/bbPress/Gravatar/gravatar.php gravatar.php] only.

==Subversion way==

Run `svn checkout http://llbbsc.googlecode.com/svn/trunk/bbPress/Gravatar/ Gravatar`

==Demonstration==

  * [http://www.livibetter.com/it/profile/livibetter Profile Page]
  * [http://www.livibetter.com/it/topic/create-views?replies=1 Topic Page]

==Features==

  * Email Verification - Users need to own the Gravatar Emails which they input.
  * Support Default Image
  * Size customized (1..80px)
  * Option page (NOT YET IMPLEMENTED)
  * Default Image based on roles (NOT YET IMPLEMENTED)

=Installation=

==Basic Steps==

  * Upload `gravatar.php` to `my-plugins`.
  * Activate

==Theme Modifications==

The following assumes using *Kakumei*. You may need to make you own if you use different theme.

===`post.php` and `style.css`===
line 2 in `post.php`
{{{
<p><strong><?php post_author_link(); ?></strong><br />
  <small><?php post_author_title(); ?></small></p>
}}}
Add a line like
{{{
<p><strong><?php post_author_link(); ?></strong><br />
  <?php GAImage() ?><br />
  <small><?php post_author_title(); ?></small></p>
}}}

Add a new style to `style.css`
{{{
.threadpost {
    min-height: 100px;
    }
}}}

You can also add your own styles, and apply `class` to `GAImage()` (Read Usage section for more detail or next subsection for an example).

===`profile.php`===

You can add a bigger avatar in profile page. Insert a line code before `<?php bb_profile_data(); ?>`, that looks like
{{{
<?php GAImageURI(0, 80, 'border: 1px solid gold', 'right'); ?>
<?php bb_profile_data(); ?>
}}}
Where `right` is a preset class in *Kakumei*. It is `float: right`.

=Customization=

==Default Image==

You can put your own default image instead of Gravatar's. If the members didn't set their Gravatar Emails in their profiles. Their avatars are default image.

This plug-in search and use the image in the following order:

  # my-plugins/gravatar-default.jpg
  # my-plugins/gravatar-default.gif
  # my-plugins/gravatar-default.png
  # bb-template/current_template/gravatar-default.jpg
  # bb-template/current_template/gravatar-default.gif
  # bb-template/current_template/gravatar-default.png

=Usage=

==Setting your own Gravatar Email==

Go checking your profile page, and edit it. There should be an additional field called *Gravatar Email*. This plug-in use this field to display Gravatar's avatar not user's registered email. *Gravatar Email* will only be shown to whom has privilege to edit the user's profile. That means only Key Master, Administrator can see others' Gravatar Email.

Once you save your new *Gravatar Email*, there should be a new *Verification Code* notification mail in your mailbox. Input the 8-letter code into your profile editing page. After you save your profile with the *Verification Code*, you should see your Gravatar avatar in you profile page immediately.

==Functions==

===`GAGetImageURI`===

Returns `src` for `<img>` tag.

  * `$id=0` - User ID
  * `$size=64` - The size (px) of avatar. Currently, it is up to 80px.

Sample Result:

{{{
http://www.gravatar.com/avatar.php?gravatar_id=9c8425c85f81798109d48e30fb1d28e4&amp;default=http%3A%2F%2Fwww.livibetter.com%2Fit%2Fmy-plugins%2Fgravatar-default.png&amp;size=64
}}}

===`GAImageURI`===

The `echo` version of `GAGetImageURI`

Sample Result:

{{{
http://www.gravatar.com/avatar.php?gravatar_id=9c8425c85f81798109d48e30fb1d28e4&amp;default=http%3A%2F%2Fwww.livibetter.com%2Fit%2Fmy-plugins%2Fgravatar-default.png&amp;size=64
}}}

===`GAGetImage`===

Returns complete `<img>` tag.

  * `$id=0` - User ID
  * `$size=64` - The size (px) of avatar. Currently, it is up to 80px.
  * `$style='border: 1px solid black'` - style attribute of `img`
  * `$class=''` - class attribute of `img`
  * `$link=true` - `img` wrapped within `a`.

Sample Result:

{{{
<a href="http://www.livibetter.com/it/profile/livibetter"><img style="border: 1px solid black;" src="http://www.gravatar.com/avatar.php?gravatar_id=9c8425c85f81798109d48e30fb1d28e4&amp;default=http%3A%2F%2Fwww.livibetter.com%2Fit%2Fmy-plugins%2Fgravatar-default.png&amp;size=64" alt="livibetter" height="64" width="64"></a>
}}}

===`GAImage`===

The `echo` version of `GAGetImage` without a link.

Sample Result:

{{{
<img style="border: 1px solid black;" src="http://www.gravatar.com/avatar.php?gravatar_id=9c8425c85f81798109d48e30fb1d28e4&amp;default=http%3A%2F%2Fwww.livibetter.com%2Fit%2Fmy-plugins%2Fgravatar-default.png&amp;size=64" alt="livibetter" height="64" width="64">
}}}

===`GAImageLink`===

The `echo` version of `GAGetImage` with a link.

Sample Result:

{{{
<a href="http://www.livibetter.com/it/profile/livibetter"><img style="border: 1px solid black;" src="http://www.gravatar.com/avatar.php?gravatar_id=9c8425c85f81798109d48e30fb1d28e4&amp;default=http%3A%2F%2Fwww.livibetter.com%2Fit%2Fmy-plugins%2Fgravatar-default.png&amp;size=64" alt="livibetter" height="64" width="64"></a>
}}}